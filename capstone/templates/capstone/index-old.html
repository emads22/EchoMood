{% extends 'capstone/layout.html' %}

{% load static %}

{% block body %}

    <h1>HELLO CAPSTONE</h1> <br>

    <!-- <iframe src="https://archive.org/embed/jj2008-06-14.mk4&playlist=1&autoplay=1" width="500" height="300" frameborder="0" webkitallowfullscreen="true" mozallowfullscreen="true" allowfullscreen></iframe> -->


    <!-- <iframe src="https://archive.org/embed/BalancedBreakfast2015-06-19" width="500" height="300" frameborder="0" webkitallowfullscreen="true" mozallowfullscreen="true" allowfullscreen></iframe>
    
    <h2>My Playlist</h2>
    
    
    <h3>Item 1: Title of Item 1</h3>
    <iframe
        src="https://archive.org/embed/BalancedBreakfast2015-06-19"
        width="500"
        height="200"
        frameborder="0"
        webkitallowfullscreen="true"
        mozallowfullscreen="true"
        allowfullscreen
    ></iframe>
    
    
    <h3>Item 2: Title of Item 2</h3>
    <iframe
        src="https://archive.org/embed/LoseYourselfClean"
        width="500"
        height="200"
        frameborder="0"
        webkitallowfullscreen="true"
        mozallowfullscreen="true"
        allowfullscreen
    ></iframe>
    
    <hr>
    <hr>
    <hr> -->

    <h2>My Playlist</h2>

    <!-- <iframe
    src="https://drive.google.com/file/d/1dS9V_4mPfOnm0SMzdLqHjIDaLNOBKSO0/preview"
    width="300"
    height="150"
    frameborder="0"
    allowfullscreen
    ></iframe> -->
    <div>
        <!-- Embedded Player for Item 1 -->
        <audio id="player1" controls>
            <source src="https://drive.google.com/uc?id=1dS9V_4mPfOnm0SMzdLqHjIDaLNOBKSO0" type="audio/mpeg">
            Your browser does not support the audio element.
            <!-- src="https://drive.google.com/file/d/1dS9V_4mPfOnm0SMzdLqHjIDaLNOBKSO0/view?usp=drive_link" -->
        </audio><br>


        <!-- Embedded Player for Item 2 -->
        <audio id="player2" controls>
            <source src="https://drive.google.com/uc?id=12wLVzkKJfiwXiUQIWaJKWTh5CTrvohE1" type="audio/mpeg">
            Your browser does not support the audio element.
        </audio><br>

        <!-- Embedded Player for Item 3 -->
        <audio id="player3" controls>
            <source src="https://drive.google.com/uc?id=1qL7pOuOE_ZLHSeVgpSRzDhaopFuL1F6v" type="audio/mpeg">
            Your browser does not support the audio element.
        </audio><br>
    </div>

    <br><br>

    <div>
        <button id="playAll">Play All</button>
        <button id="pauseAll">Pause All</button>
        <button id="playNext">Play Next</button>
        <button id="playPrevious">Play Previous</button>
    </div>

    <script>
        const players = [
            document.getElementById("player1"),
            document.getElementById("player2"),
            document.getElementById("player3")
        ];

        let currentPlayerIndex = 0;

        function playNext() {
            players[currentPlayerIndex].pause();
            currentPlayerIndex = (currentPlayerIndex + 1) % players.length;
            players[currentPlayerIndex].play();
        }

        function playPrevious() {
            players[currentPlayerIndex].pause();
            if (currentPlayerIndex===0) {
                currentPlayerIndex = players.length - 1;
            } else {
                currentPlayerIndex = (currentPlayerIndex - 1) % players.length;
            }
            
            players[currentPlayerIndex].play();
        }

        document.getElementById("playAll").addEventListener("click", () => {
            players[currentPlayerIndex].play();
        });

        document.getElementById("pauseAll").addEventListener("click", () => {
            players[currentPlayerIndex].pause();
        });

        document.getElementById("playNext").addEventListener("click", () => {
            playNext();
        });

        document.getElementById("playPrevious").addEventListener("click", () => {
            playPrevious();
        });

        players.forEach(player => {
            player.addEventListener("ended", playNext);

            player.addEventListener("play", (event) => {
                players.forEach(otherPlayer => {
                    if (otherPlayer !== event.target) {
                        otherPlayer.pause();
                    }
                })
            })
        });
    </script>




{% endblock %} 